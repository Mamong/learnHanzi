const characterToSvgSlices = (strokes,background) => {
  const slices = []
  for(let i = 0; i < strokes.length;i++){
    slices.push(strokes.slice(0,i+1))
  }
  return slices.map(slice=>characterToSvg(slice))
}

const characterToSvg = (strokes,color='#07c160') => {
  let svg = `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024'>
  <rect x="0" y="0" width="1024" height="1024" stroke="${color}" stroke-width='20' fill='none'/>
  <path d="M1024,0 L0,1024 Z" fill="#fff" stroke="${color}" stroke-width="10" stroke-dasharray="20,60"></path>
  <path d="M0,0 L1024,1024 Z" fill="#fff" stroke="${color}" stroke-width="10" stroke-dasharray="20,60"></path>
  <path d="M0,512 L1024,512 Z" fill="#fff" stroke="${color}" stroke-width="10" stroke-dasharray="20,50"></path>
  <path d="M512,0 L512,1024 Z" fill="#fff" stroke="${color}" stroke-width="10" stroke-dasharray="20,50"></path> 
  <g transform="scale(1, -1) translate(0, -900)">
    paths
  </g>
</svg>`
  let paths = strokes.map(stroke => `<path d="${stroke}"></path>`).join()
  svg = svg.replace('paths', paths)
  return convertSvgToData(svg)
}
//#ff4242
const backgroundToSvg = (color='#07c160') => {
  let svg = `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024'>
  <rect x="0" y="0" width="1024" height="1024" stroke="${color}" stroke-width='20' fill='none'/>
  <path d="M1024,0 L0,1024 Z" fill="#fff" stroke="${color}" stroke-width="10" stroke-dasharray="20,60"></path>
  <path d="M0,0 L1024,1024 Z" fill="#fff" stroke="${color}" stroke-width="10" stroke-dasharray="20,60"></path>
  <path d="M0,512 L1024,512 Z" fill="#fff" stroke="${color}" stroke-width="10" stroke-dasharray="20,50"></path>
  <path d="M512,0 L512,1024 Z" fill="#fff" stroke="${color}" stroke-width="10" stroke-dasharray="20,50"></path> 
</svg>`
  return convertSvgToData(svg)
}

const convertSvgToData = svg => {
  svg = svg.replace('<svg', (~svg.indexOf('xmlns') ? '<svg' : '<svg xmlns="http://www.w3.org/2000/svg"'))
    //
    //   Encode (may need a few extra replacements)
    //
    .replace(/"/g, '\'')
    .replace(/%/g, '%25')
    .replace(/#/g, '%23')
    .replace(/{/g, '%7B')
    .replace(/}/g, '%7D')
    .replace(/</g, '%3C')
    .replace(/>/g, '%3E')

    .replace(/\s+/g, ' ')
  // 
  //    The maybe list (add on documented fail)
  // 
  //  .replace(/&/g, '%26')
  //  .replace('|', '%7C')
  //  .replace('[', '%5B')
  //  .replace(']', '%5D')
  //  .replace('^', '%5E')
  //  .replace('`', '%60')
  //  .replace(';', '%3B')
  //  .replace('?', '%3F')
  //  .replace(':', '%3A')
  //  .replace('@', '%40')
  //  .replace('=', '%3D') 
  return "data:image/svg+xml," + svg
}

const soundIcon = (color='#07c160')=>{
  const svg = `<svg t="1693899131661" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4671"><path d="M881.830054 731.689514l-107.32627-61.993514a15.470703 15.470703 0 0 0-21.116541 5.756541l-19.372973 33.570594a15.55373 15.55373 0 0 0 5.673514 21.227243l107.298594 61.965838a15.443027 15.443027 0 0 0 21.116541-5.728865l19.372973-33.570594a15.636757 15.636757 0 0 0-5.645838-21.227243z m-128.525838-383.142055a15.443027 15.443027 0 0 0 21.116541 5.728865l107.298594-61.993513a15.55373 15.55373 0 0 0 5.645838-21.199568l-19.26227-33.487567a15.470703 15.470703 0 0 0-21.116541-5.70119l-107.298594 61.965838a15.55373 15.55373 0 0 0-5.645838 21.199568l19.26227 33.487567z m169.292108 128.415136h-124.54054a15.609081 15.609081 0 0 0-15.581406 15.581405v38.912c0 8.579459 7.029622 15.581405 15.581406 15.581405h124.54054c8.579459 0 15.55373-7.001946 15.55373-15.581405v-38.912a15.609081 15.609081 0 0 0-15.55373-15.581405zM622.813405 125.730595c-5.728865 0-11.568432 1.549838-16.909837 5.147675L260.981622 356.324324H101.403676a15.609081 15.609081 0 0 0-15.55373 15.581406v280.18854c0 8.579459 7.001946 15.581405 15.55373 15.581406H260.981622l344.921946 225.446054c5.341405 3.487135 11.264 5.147676 16.909837 5.147675 16.245622 0 31.245838-12.952216 31.245838-31.245837V156.948757c0-18.265946-15.000216-31.218162-31.245838-31.218162z" fill="${color}" fill-opacity=".65" p-id="4672"></path></svg>`
  return convertSvgToData(svg)
}

const pencilIcon = (color='#07c160')=>{
  const svg = `
  <svg t="1693901276604" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5815"><path d="M114.184192 936.365056c-7.08096-0.013312-13.877248-2.832384-18.895872-7.836672-7.126016-7.126016-9.732096-17.601536-6.784-27.2384 0.575488-1.888256 58.07616-190.170112 69.574656-232.603648 1.241088-4.566016 3.653632-8.7296 6.990848-12.080128 0 0 509.130752-509.3376 524.081152-524.120064 27.316224-27.3152 63.917056-43.313152 102.509568-44.839936 35.837952 0.81408 69.891072 15.791104 94.697472 41.658368 32.720896 31.427584 49.664 65.067008 50.335744 100.026368 0.51712 35.385344-15.63648 70.36928-48.21504 103.969792C856.962048 365.852672 382.084096 835.446784 361.869312 855.415808c-3.130368 3.091456-6.971392 5.366784-11.1872 6.622208-31.983616 9.532416-226.31936 72.361984-228.28544 72.994816C119.745536 935.899136 116.977664 936.351744 114.184192 936.365056zM207.98976 690.025472c-10.010624 35.617792-39.821312 125.582336-56.680448 181.064704 55.845888-17.989632 146.818048-49.508352 177.650688-59.014144 50.762752-50.20672 491.568128-486.20032 521.107456-516.632576 22.116352-22.852608 33.23904-44.762112 32.850944-65.119232-0.401408-19.8656-11.666432-40.687616-33.652736-61.743104-14.938112-16.128-35.631104-25.737216-57.604096-26.732544-24.418304 1.732608-47.439872 12.105728-64.900096 29.28128-14.097408 13.903872-465.927168 465.946624-518.837248 518.883328L207.98976 690.025472zM350.358528 853.7088c-13.57312-0.064512-24.98048-10.20416-26.62912-23.681024-6.265856-30.871552-21.462016-59.220992-43.701248-81.517568-22.464512-24.482816-52.036608-41.295872-84.563968-48.086016-14.711808-1.900544-25.174016-15.273984-23.48032-30.005248 1.532928-14.70464 14.698496-25.388032 29.396992-23.84896 0.013312 0 0.032768 0 0.045056 0 88.92928 17.84832 158.303232 87.597056 175.660032 176.616448 1.913856 14.795776-8.497152 28.337152-23.279616 30.28992-1.164288 0.154624-2.33472 0.22016-3.511296 0.22016L350.358528 853.7088zM828.883968 369.137664c-13.580288-0.052224-24.987648-10.20416-26.616832-23.681024-14.304256-64.290816-64.200704-114.678784-128.336896-129.603584-14.70464-1.94048-25.12896-15.300608-23.447552-30.031872 1.513472-14.665728 14.62784-25.34912 29.30688-23.84896 0.0256 0.012288 0.064512 0.012288 0.103424 0.012288 44.724224 8.070144 85.644288 30.367744 116.683776 63.566848 30.716928 30.78144 51.318784 70.189056 59.053056 112.985088 2.018304 14.731264-8.276992 28.310528-23.020544 30.328832-1.2544 0.181248-2.522112 0.258048-3.802112 0.258048L828.883968 369.137664z" p-id="5816" fill="${color}"></path></svg>
  `
  return convertSvgToData(svg)
}

const dictationIcon = (color='#07c160')=>{
  const svg = `
  <svg t="1693901401712" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6954"><path d="M64 511.5C64 263.8 264.8 63 512.5 63S961 263.8 961 511.5V752c0 61.856-50.144 112-112 112h-56c-61.856 0-112-50.144-112-112V584c0-61.856 50.144-112 112-112h85.908C859.199 287.057 702.673 143 512.5 143S165.8 287.057 146.092 472H232c61.856 0 112 50.144 112 112v168c0 61.856-50.144 112-112 112h-56c-61.856 0-112-50.144-112-112V512v-0.25-0.25zM881 552h-88c-17.673 0-32 14.327-32 32v168c0 17.673 14.327 32 32 32h56c17.673 0 32-14.327 32-32V552z m-737 0v200c0 17.673 14.327 32 32 32h56c17.673 0 32-14.327 32-32V584c0-17.673-14.327-32-32-32h-88z" fill="${color}" p-id="6955"></path></svg>
  `
  return convertSvgToData(svg)
}

export {
  characterToSvg,
  characterToSvgSlices,
  backgroundToSvg,
  soundIcon,
  pencilIcon,
  dictationIcon
}